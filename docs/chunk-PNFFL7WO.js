import{$ as ce,A as I,B as se,D as me,Y as le,Z as de,_ as F,aa as O,ba as pe,ca as ue,da as ge,ea as fe,fa as he,ga as x,ha as Y,ia as $,ja as H,la as Z,ma as Ce,na as J,oa as be,qa as K,ra as Me,ta as ve}from"./chunk-LZVNJNFN.js";import{A as G,C as ae,g as oe,h as ne,i as P,k as Q,l as S,n as q,p,r as D,s as j,t as B,v as M,w as V,x as z,y as U}from"./chunk-4NJJ6B46.js";import{Bc as te,Cc as A,Db as g,Dc as re,Fb as b,Fc as ie,Gc as N,Nb as s,Ob as f,Pb as L,Ua as m,Va as u,Wb as R,Xb as X,Yb as ee,Z as _,eb as h,ha as w,ia as y,kb as C,mb as l,ub as o,vb as i,wb as T,z as v}from"./chunk-2DJ3BK5N.js";var xe=t=>({active:t}),Se=(()=>{let e=class e{constructor(r,n,a,c){this.router=r,this.route=n,this.authService=a,this.snackBar=c,this.activeButton="login",this.subtitle="Access your account by entering your credentials below."}ngOnInit(){this.authService.activeView$.subscribe(r=>{this.activeButton=r,this.subtitle=r==="register"?"Create a new account to get started with our services.":"Access your account by entering your credentials below."}),this.route.url.subscribe(r=>{this.router.url.includes("register")?this.authService.setActiveView("register"):this.router.url.includes("login")&&this.authService.setActiveView("login")}),this.authService.message$.subscribe(r=>{r&&this.snackBar.open(r,"Close",{duration:3e3,horizontalPosition:"center",verticalPosition:"bottom"})})}goRegister(){this.router.navigate(["auth/register"])}goLogin(){this.router.navigate(["auth/login"])}};e.\u0275fac=function(n){return new(n||e)(u(P),u(oe),u(S),u(le))},e.\u0275cmp=w({type:e,selectors:[["auth-layout-page"]],decls:22,vars:10,consts:[[1,"auth-card"],["mat-button","",1,"btn-login",3,"click","ngClass"],["mat-button","",1,"btn-register",3,"click","ngClass"],[1,"footer-info"],["mat-button","","href","/terms"],["mat-button","","href","/privacy"]],template:function(n,a){n&1&&(o(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title"),s(3),X(4,"titlecase"),i(),o(5,"mat-card-subtitle"),s(6),i()(),o(7,"mat-card-actions")(8,"button",1),g("click",function(){return a.goLogin()}),s(9,"Log in"),i(),o(10,"button",2),g("click",function(){return a.goRegister()}),s(11,"Sign In"),i()(),o(12,"mat-card-content"),T(13,"router-outlet"),i(),o(14,"mat-card-footer")(15,"div",3)(16,"span"),s(17,"\xA9 2024 sava4632"),i(),o(18,"a",4),s(19,"Terms & Conditions"),i(),o(20,"a",5),s(21,"Privacy Policy"),i()()()()),n&2&&(m(3),f(ee(4,4,a.activeButton)),m(3),f(a.subtitle),m(2),l("ngClass",R(6,xe,a.activeButton==="login")),m(2),l("ngClass",R(8,xe,a.activeButton==="register")))},dependencies:[te,ne,se,I,F,ue,O,fe,ge,pe,ce,ie],styles:[".auth-card[_ngcontent-%COMP%]{padding:16px;box-sizing:border-box;width:90%;max-width:600px;margin:auto;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.auth-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding:0;border-bottom:1px solid #ddd}.auth-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{padding:0;display:flex;flex-direction:row;justify-content:space-between;width:100%;background-color:#fff;box-sizing:border-box}.auth-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:block;width:100%;box-sizing:border-box;padding:0}.auth-card[_ngcontent-%COMP%]   mat-card-footer[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%;box-sizing:border-box;padding:0}.btn-login[_ngcontent-%COMP%]{flex:1;margin:0;border-radius:5px 0 0 5px}.btn-register[_ngcontent-%COMP%]{flex:1;margin:0;border-radius:0 5px 5px 0}.active[_ngcontent-%COMP%]{background-color:#adff2f}mat-card-footer[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:16px;background-color:#f1f1f1;border-top:1px solid #ddd}.footer-info[_ngcontent-%COMP%]{margin-top:8px;font-size:12px;text-align:center}a[_ngcontent-%COMP%]{text-decoration:none;color:#007bff}a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]});let t=e;return t})();var Ne=t=>({display:t});function qe(t,e){if(t&1&&(o(0,"mat-error"),s(1),i()),t&2){let d=b();m(),f(d.errorEmailMessage())}}function De(t,e){if(t&1&&(o(0,"mat-error"),s(1),i()),t&2){let d=b();m(),f(d.errorPasswordMessage())}}function je(t,e){if(t&1&&(o(0,"mat-card",9)(1,"mat-card-content"),s(2),i()()),t&2){let d=b();l("ngStyle",R(2,Ne,d.loginError()?"block":"none")),m(2),L(" ",d.loginError()," ")}}var Ie=(()=>{let e=class e{constructor(r,n){this.authService=r,this.router=n,this.loginForm=new B({one:new M}),this.email=new M("",[p.required,p.email]),this.password=new M("",[p.required]),this.loginError=h(""),this.errorEmailMessage=h(""),this.errorPasswordMessage=h(""),this.authService.setActiveView("login"),v(this.email.statusChanges,this.email.valueChanges).pipe(x()).subscribe(()=>this.updateEmailErrorMessage()),v(this.password.statusChanges,this.password.valueChanges).pipe(x()).subscribe(()=>this.updatePasswordErrorMessage())}ngOnInit(){this.email.setValue(this.authService.emailCache||"")}updateEmailErrorMessage(){this.email.hasError("required")?this.errorEmailMessage.set("You must enter a value"):this.email.hasError("email")?this.errorEmailMessage.set("Not a valid email"):this.errorEmailMessage.set("")}updatePasswordErrorMessage(){this.password.hasError("required")?this.errorPasswordMessage.set("You must enter a password"):this.errorPasswordMessage.set("")}onLogin(r){r.preventDefault(),this.email.valid&&this.password.valid&&this.authService.login(this.email.value,this.password.value).subscribe({next:n=>{this.router.navigate(["/tasks"])},error:n=>{this.password.reset(),this.showLoginError(n.error.message)}})}showLoginError(r){this.loginError.set(r||"An error occurred during login"),setTimeout(()=>{this.loginError.set("")},1e4)}};e.\u0275fac=function(n){return new(n||e)(u(S),u(P))},e.\u0275cmp=w({type:e,selectors:[["app-login-page"]],decls:19,vars:7,consts:[[1,"container"],[3,"ngSubmit","formGroup"],["appearance","fill"],["matInput","","placeholder","dev@example.com","required","",3,"blur","formControl"],["matSuffix",""],[4,"ngIf"],["matInput","","placeholder","****","required","",3,"type","formControl"],["class","card-error",3,"ngStyle",4,"ngIf"],["mat-raised-button","","color","primary","type","submit"],[1,"card-error",3,"ngStyle"]],template:function(n,a){n&1&&(o(0,"div",0)(1,"form",1),g("ngSubmit",function(E){return a.onLogin(E)}),o(2,"mat-form-field",2)(3,"mat-label"),s(4,"Enter your email"),i(),o(5,"input",3),g("blur",function(){return a.updateEmailErrorMessage()}),i(),o(6,"mat-icon",4),s(7,"mail"),i(),C(8,qe,2,1,"mat-error",5),i(),o(9,"mat-form-field",2)(10,"mat-label"),s(11,"Enter your password"),i(),T(12,"input",6),o(13,"mat-icon",4),s(14,"lock"),i(),C(15,De,2,1,"mat-error",5),i(),C(16,je,3,4,"mat-card",7),o(17,"button",8),s(18," Log In "),i()()()),n&2&&(m(),l("formGroup",a.loginForm),m(4),l("formControl",a.email),m(3),l("ngIf",a.email.invalid),m(4),l("type","password")("formControl",a.password),m(3),l("ngIf",a.password.invalid),m(),l("ngIf",a.loginError))},dependencies:[A,re,I,F,O,Z,Y,$,H,J,K,V,q,D,j,G,z,U],styles:[".container[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;padding:16px}form[_ngcontent-%COMP%]{margin:0%;width:100%;box-sizing:border-box;display:flex;flex-direction:column;align-items:center}mat-form-field[_ngcontent-%COMP%]{width:100%;box-sizing:border-box}mat-icon[_ngcontent-%COMP%]{color:#adff2f}.card-error[_ngcontent-%COMP%]{color:#721c24;background-color:#f8d7da;border-color:#f5c6cb;margin-bottom:1.5rem;width:100%}button[_ngcontent-%COMP%]{width:50%;display:block;margin-inline:auto}"]});let t=e;return t})();function Be(t,e){if(t&1&&(o(0,"mat-error"),s(1),i()),t&2){let d=b();m(),f(d.errorEmailMessage())}}function Ve(t,e){if(t&1&&(o(0,"mat-error"),s(1),i()),t&2){let d=b();m(),f(d.errorPasswordMessage())}}function ze(t,e){if(t&1&&(o(0,"mat-error"),s(1),i()),t&2){let d=b();m(),f(d.errorUsernameMessage())}}function Ue(t,e){if(t&1&&(o(0,"mat-card",10)(1,"mat-card-content"),s(2),i()()),t&2){let d=b();m(2),L(" ",d.registerError()," ")}}var Fe=(()=>{let e=class e{constructor(r,n){this.authService=r,this.router=n,this.registerForm=new B({email:new M("",[p.required,p.email]),password:new M("",[p.required,p.minLength(8)]),username:new M("",[p.required,p.minLength(3),p.pattern("^[a-zA-Z0-9]+$")])}),this.emailControl=this.registerForm.get("email"),this.passwordControl=this.registerForm.get("password"),this.usernameControl=this.registerForm.get("username"),this.registerError=h(""),this.errorEmailMessage=h(""),this.errorPasswordMessage=h(""),this.errorUsernameMessage=h(""),this.authService.setActiveView("register"),this.emailControl&&this.passwordControl&&this.usernameControl&&(v(this.emailControl.statusChanges,this.emailControl.valueChanges).pipe(x()).subscribe(()=>this.updateEmailErrorMessage()),v(this.passwordControl.statusChanges,this.passwordControl.valueChanges).pipe(x()).subscribe(()=>this.updatePasswordErrorMessage()),v(this.usernameControl.statusChanges,this.usernameControl.valueChanges).pipe(x()).subscribe(()=>this.updateUsernameErrorMessage()))}onRegister(r){r.preventDefault(),this.emailControl.valid&&this.passwordControl.valid&&this.usernameControl.valid&&this.authService.register(this.emailControl.value,this.passwordControl.value,this.usernameControl.value).subscribe({next:n=>{this.authService.setMessage("Registration successful!"),this.router.navigate(["/auth"])},error:n=>{this.showRegisterError("An error occurred during registration")}})}updateEmailErrorMessage(){let r=this.registerForm.get("email");r?.hasError("required")?this.errorEmailMessage.set("You must enter a value"):r?.hasError("email")?this.errorEmailMessage.set("Not a valid email"):this.errorEmailMessage.set("")}updatePasswordErrorMessage(){let r=this.registerForm.get("password");r?.hasError("required")?this.errorPasswordMessage.set("You must enter a password"):r?.hasError("minlength")?this.errorPasswordMessage.set("Password must be at least 8 characters long"):r?.hasError("pattern")?this.errorPasswordMessage.set("Password must contain a number, a letter, and a special character"):this.errorPasswordMessage.set("")}updateUsernameErrorMessage(){let r=this.registerForm.get("username");r?.hasError("required")?this.errorUsernameMessage.set("You must enter a username"):r?.hasError("minlength")?this.errorUsernameMessage.set("Username must be at least 3 characters long"):r?.hasError("pattern")?this.errorUsernameMessage.set("Username can only contain letters and numbers"):this.errorUsernameMessage.set("")}showRegisterError(r){this.registerError.set(r||"An error occurred during register"),setTimeout(()=>{this.registerError.set("")},1e4)}};e.\u0275fac=function(n){return new(n||e)(u(S),u(P))},e.\u0275cmp=w({type:e,selectors:[["app-register-page"]],decls:26,vars:10,consts:[[1,"container"],[3,"ngSubmit","formGroup"],["appearance","fill"],["matInput","","placeholder","dev@example.com","required","",3,"blur","formControl"],["matSuffix",""],[4,"ngIf"],["matInput","","placeholder","****","required","",3,"blur","type","formControl"],["matInput","","placeholder","dev123","required","",3,"blur","type","formControl"],["class","card-error",4,"ngIf"],["mat-raised-button","","color","primary","type","submit"],[1,"card-error"]],template:function(n,a){if(n&1&&(o(0,"div",0)(1,"form",1),g("ngSubmit",function(E){return a.onRegister(E)}),o(2,"mat-form-field",2)(3,"mat-label"),s(4,"Enter your email"),i(),o(5,"input",3),g("blur",function(){return a.updateEmailErrorMessage()}),i(),o(6,"mat-icon",4),s(7,"mail"),i(),C(8,Be,2,1,"mat-error",5),i(),o(9,"mat-form-field",2)(10,"mat-label"),s(11,"Enter your password"),i(),o(12,"input",6),g("blur",function(){return a.updatePasswordErrorMessage()}),i(),o(13,"mat-icon",4),s(14,"lock"),i(),C(15,Ve,2,1,"mat-error",5),i(),o(16,"mat-form-field",2)(17,"mat-label"),s(18,"Enter your username"),i(),o(19,"input",7),g("blur",function(){return a.updateUsernameErrorMessage()}),i(),o(20,"mat-icon",4),s(21,"person"),i(),C(22,ze,2,1,"mat-error",5),i(),C(23,Ue,3,1,"mat-card",8),o(24,"button",9),s(25," Sign in "),i()()()),n&2){let c,E,W;m(),l("formGroup",a.registerForm),m(4),l("formControl",a.emailControl),m(3),l("ngIf",(c=a.registerForm.get("email"))==null?null:c.invalid),m(4),l("type","password")("formControl",a.passwordControl),m(3),l("ngIf",(E=a.registerForm.get("password"))==null?null:E.invalid),m(4),l("type","username")("formControl",a.usernameControl),m(3),l("ngIf",(W=a.registerForm.get("username"))==null?null:W.invalid),m(),l("ngIf",a.registerError())}},dependencies:[A,I,F,O,Z,Y,$,H,J,K,V,q,D,j,G,z,U],styles:[".container[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;padding:16px}form[_ngcontent-%COMP%]{margin:0%;width:100%;box-sizing:border-box;display:flex;flex-direction:column;align-items:center}mat-form-field[_ngcontent-%COMP%]{width:100%;box-sizing:border-box}mat-icon[_ngcontent-%COMP%]{color:#adff2f}.card-error[_ngcontent-%COMP%]{color:#721c24;background-color:#f8d7da;border-color:#f5c6cb;margin-bottom:1.5rem;width:100%}.card-error[_ngcontent-%COMP%]   .icon-error[_ngcontent-%COMP%]{cursor:pointer;color:#721c24}button[_ngcontent-%COMP%]{width:50%;display:block;margin-inline:auto}"]});let t=e;return t})();var Ge=[{path:"",component:Se,children:[{path:"login",component:Ie},{path:"register",component:Fe},{path:"**",redirectTo:"login"}]}],Oe=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=y({type:e}),e.\u0275inj=_({imports:[Q.forChild(Ge),Q]});let t=e;return t})();var Re=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=y({type:e}),e.\u0275inj=_({imports:[N,me,he,ve,Ce,be,Me,de]});let t=e;return t})();var Ft=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=y({type:e}),e.\u0275inj=_({imports:[N,Oe,Re,ae]});let t=e;return t})();export{Ft as AuthModule};
